# Require

requireモジュールは、パイプライン内のエントリを調べて、特定の列挙型フィールドを持たないエントリを削除する単純なフィルタです。  ユースケースの例は、アップストリームモジュールがメタデータを抽出しているが、必要なすべての名前を常に入力するとは限らない場合の第2レベルのフィルタリングです。  [必須]を選択すると、実際に目的の機能セットを持つエントリのみがモジュールを通過するように検索されます。

デフォルトでは、列挙値のリストを指定すると、requireモジュールは、列挙値の名前のうち少なくとも1つが含まれていれば、エントリをパイプラインに渡します。  この動作は、次に示すようにフラグを使って変更できます。

## サポートされているオプション

* `-s`: `-s`このオプションは厳密な操作を指定します。  列挙された列挙値は、1つだけではなくすべて存在しなければなりません。  基本的に、モジュールを論理OR演算から論理ANDに変更します。
* `-v `: `-v`オプションは、本質的に「これらの列挙値のいずれかを持つすべてのエントリを削除する」と言って、要件ロジックを逆にします。  このフラグはフラグを意味し-sます。  上流のモジュールが何らかのフィールドを抽出するかもしれないし、しないかもしれない、そしてあなたがフィールドを持っていなかったエントリーだけを見たいとき、要求モジュールを逆にすることは役に立つことができます。

## 使用例

次の検索はパケットエントリを取得し、 "SrcPort"列挙値が設定されていないものを削除してから、各送信元ポートが出現した回数をカウントします。  これはTCPトラフィックではないすべてのパケットを排除する効果があります:

```
tag=pcap packet tcp.SrcPort | require SrcPort | count by SrcPort | table SrcPort count
```

次の検索では、Aフィールドが列挙値に存在するすべてのエントリを削除することによって、IPv4解決が成功しなかったDNS要求を探します:

```
tag=dns json Question.Hdr.Name Question.A | require -v A | count by Name | table Name count
```

この検索は、TCP送信元ポートまたはUDP送信元ポートのいずれかが指定されているパケットを通過します:

```
tag=pcap packet tcp.SrcPort as tsp udp.SrcPort as usp | require tsp usp | table tsp usp
```

この検索は、IPv4送信元IP と TCP送信元ポートの両方を持たないパケットをすべてドロップします:

```
tag=pcap packet tcp.SrcPort ipv4.SrcIP | require -s SrcPort SrcIP | table SrcPort SrcIP
```
